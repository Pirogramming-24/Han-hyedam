{% extends 'base.html' %}
{% load static %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" />
<link rel="stylesheet" href="{% static 'posts/css/detail.css' %}">
<title>{{ post.title }} - ì‚¬ê³¼ ë§ˆì¼“</title>
{% endblock %}

{% block content %}
<div class="detail-wrapper">
    <a href="/" class="back-button">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    
    <div class="detail-card">
        <div class="detail-header">
            <h1>{{ post.title }}</h1>
        </div>
        
        <div class="detail-image-section">
            {% if post.photo %}
            <img src="{{ post.photo.url }}" alt="{{ post.title }}">
            {% else %}
            <img src="{% static 'posts/image/no-image.jpg' %}" alt="ê¸°ë³¸ ì´ë¯¸ì§€">
            {% endif %}
        </div>
        
        <div class="detail-content">
            <div class="info-grid">
                <div class="info-box">
                    <div class="info-label">ì‘ì„±ì</div>
                    <div class="info-value">{{ post.user }}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">ì§€ì—­</div>
                    <div class="info-value">{{ post.region }}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">ê°€ê²©</div>
                    <div class="info-value">{{ post.price|floatformat:0 }}ì›</div>
                </div>
            </div>
            
            <div class="description-section">
                <h3>ğŸ“ ìƒí’ˆ ì„¤ëª…</h3>
                <p>{{ post.content }}</p>
            </div>
            
            {% if post.hashtags %}
            <div class="hashtag-box">
                <div class="hashtag-box-title">
                    ğŸ·ï¸ ìƒí’ˆ íƒœê·¸
                </div>
                <div class="hashtag-list">
                    {% for tag in post.get_hashtag_list %}
                    <a href="/?hashtag={{ tag }}" class="hashtag-item">#{{ tag }}</a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if post.calories or post.carbs or post.protein or post.fat %}
            <div class="nutrition-box">
                <div class="nutrition-box-title">
                    ğŸ“Š ì‹í’ˆ ì˜ì–‘ ì •ë³´
                </div>
                <div class="nutrition-grid">
                    {% if post.calories %}
                    <div class="nutrition-item">
                        <strong>ì¹¼ë¡œë¦¬</strong>
                        <span>{{ post.calories }}kcal</span>
                    </div>
                    {% endif %}
                    {% if post.carbs %}
                    <div class="nutrition-item">
                        <strong>íƒ„ìˆ˜í™”ë¬¼</strong>
                        <span>{{ post.carbs }}g</span>
                    </div>
                    {% endif %}
                    {% if post.protein %}
                    <div class="nutrition-item">
                        <strong>ë‹¨ë°±ì§ˆ</strong>
                        <span>{{ post.protein }}g</span>
                    </div>
                    {% endif %}
                    {% if post.fat %}
                    <div class="nutrition-item">
                        <strong>ì§€ë°©</strong>
                        <span>{{ post.fat }}g</span>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            <div class="meta-info">
                <span>ğŸ“… ì‘ì„±ì¼: {{ post.created_at|date:"Yë…„ mì›” dì¼ H:i" }}</span>
                {% if post.updated_at %}
                <span>âœï¸ ìˆ˜ì •ì¼: {{ post.updated_at|date:"Yë…„ mì›” dì¼ H:i" }}</span>
                {% endif %}
            </div>
            
            <div class="action-buttons">
                <a href="{% url 'posts:update' post.pk %}" class="btn btn-edit">ìˆ˜ì •í•˜ê¸°</a>
                <a href="{% url 'posts:delete' post.pk %}" class="btn btn-delete">ì‚­ì œí•˜ê¸°</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}