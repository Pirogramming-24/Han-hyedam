{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>ì‚¬ê³¼ ë§ˆì¼“</title>
<link rel="stylesheet" href="{% static 'posts/css/list.css' %}">
{% endblock %}

{% block content %}
<div class="list-wrapper">
    <div class="list-container">
        <div class="action-bar">
            <a href="{% url 'posts:create' %}" class="btn-new">âœ¨ íŒë§¤í•˜ê¸°</a>
        </div>
        
        {% if hashtag %}
        <div class="tag-filter">
            <div class="label">
                ğŸ·ï¸ <span>#{{ hashtag }}</span> ê²€ìƒ‰ ê²°ê³¼
            </div>
            <a href="/" class="btn-clear">âœ• í•´ì œ</a>
        </div>
        {% endif %}
        
        <div class="search-box">
            <form action="/" class="search-form">
                <input type="text" name="search_txt" class="input-field" 
                       placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="{{ search_txt|default:'' }}">
                <input type="text" name="min_price" class="input-field" 
                       placeholder="ìµœì†Œ ê°€ê²©" value="{{ min_price|default:'' }}">
                <input type="text" name="max_price" class="input-field" 
                       placeholder="ìµœëŒ€ ê°€ê²©" value="{{ max_price|default:'' }}">
                <button type="submit" class="btn-submit">ê²€ìƒ‰</button>
            </form>
        </div>
    </div>
</div>

<div class="content-wrapper">
    {% if posts %}
    <div class="products-grid">
        {% for post in posts %}
        <div class="product-card" onclick="location.href='{% url 'posts:detail' post.pk %}'">
            <div class="product-img">
                {% if post.photo %}
                <img src="{{ post.photo.url }}" alt="{{ post.title }}">
                {% else %}
                <img src="{% static 'posts/image/no-image.jpg' %}" alt="ì´ë¯¸ì§€ ì—†ìŒ">
                {% endif %}
                <div class="new-badge">NEW</div>
            </div>
            <div class="product-body">
                <a href="{% url 'posts:detail' post.pk %}" class="product-name">{{ post.title }}</a>
                <div class="product-location">ğŸ“ {{ post.region }}</div>
                
                {% if post.calories or post.carbs or post.protein or post.fat %}
                <div class="nutrition-tags">
                    {% if post.calories %}<span class="tag">ğŸ”¥ {{ post.calories }}kcal</span>{% endif %}
                    {% if post.carbs %}<span class="tag">ğŸ {{ post.carbs }}g</span>{% endif %}
                    {% if post.protein %}<span class="tag">ğŸ’ª {{ post.protein }}g</span>{% endif %}
                    {% if post.fat %}<span class="tag">ğŸ¥‘ {{ post.fat }}g</span>{% endif %}
                </div>
                {% endif %}
                
                <div class="product-footer">
                    <div class="product-price">{{ post.price|floatformat:0 }}ì›</div>
                    <div class="product-time">{{ post.created_at|date:"m.d" }}</div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-results">
        <div class="no-results-icon">ğŸ”</div>
        <h3>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”</h3>
        <p>ì›í•˜ì‹œëŠ” ìƒí’ˆì„ ì°¾ì§€ ëª»í–ˆë‚˜ìš”?</p>
        
        <div class="no-results-actions">
            <a href="/" class="btn-home">ğŸ  ì „ì²´ ìƒí’ˆ ë³´ê¸°</a>
            <a href="{% url 'posts:create' %}" class="btn-create-new">âœ¨ ìƒí’ˆ ë“±ë¡í•˜ê¸°</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}